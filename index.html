<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Instagram Grid for Notion</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <style>
        * { margin: 0; padding: 0; box-sizing: border-box; font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Helvetica, Arial, sans-serif; }
        body { background: linear-gradient(135deg, #833ab4, #fd1d1d, #fcb045); min-height: 100vh; display: flex; flex-direction: column; align-items: center; justify-content: center; padding: 20px; }
        .container { background: #fff; border-radius: 16px; box-shadow: 0 15px 40px rgba(0,0,0,0.25); width: 100%; max-width: 900px; overflow: hidden; }
        .header { padding: 20px 30px; display: flex; align-items: center; justify-content: space-between; border-bottom: 1px solid #efefef; }
        .logo { display: flex; align-items: center; gap: 12px; }
        .logo i { font-size: 32px; background: linear-gradient(45deg, #833ab4, #fd1d1d, #fcb045); -webkit-background-clip: text; -webkit-text-fill-color: transparent; }
        .logo-text { font-size: 24px; font-weight: 600; color: #262626; }
        .grid-info { display: flex; align-items: center; gap: 15px; }
        .grid-size { background: #f8f8f8; padding: 8px 15px; border-radius: 20px; font-size: 14px; color: #737373; }
        .counter { background: #0095f6; color: white; padding: 8px 15px; border-radius: 20px; font-size: 14px; font-weight: 500; }
        .grid-container { padding: 20px; background: #fafafa; overflow-y: auto; max-height: 75vh; }
        .grid { display: grid; grid-template-columns: repeat(3, 1fr); gap: 8px; }
        .grid-item { position: relative; background: #f0f0f0; border-radius: 4px; overflow: hidden; cursor: pointer; transition: all 0.2s ease; aspect-ratio: 4/5; }
        .grid-item:hover { transform: scale(1.02); box-shadow: 0 5px 15px rgba(0,0,0,0.1); }
        .grid-item img, .grid-item video { width: 100%; height: 100%; object-fit: cover; }
        .grid-item.empty::before, .grid-item.empty::after { content: ''; position: absolute; top: 50%; left: 50%; transform: translate(-50%, -50%); background: #dbdbdb; border-radius: 2px; }
        .grid-item.empty::before { width: 2px; height: 30px; }
        .grid-item.empty::after { width: 30px; height: 2px; }
        .controls { display: flex; justify-content: center; gap: 15px; padding: 20px; border-top: 1px solid #efefef; }
        .btn { background: #0095f6; color: white; border: none; padding: 12px 25px; border-radius: 8px; font-weight: 600; cursor: pointer; display: flex; align-items: center; gap: 10px; transition: background 0.3s; font-size: 16px; }
        .btn:hover { background: #0081d6; }
        .btn.reset { background: #efefef; color: #262626; }
        .btn.reset:hover { background: #e2e2e2; }
        .instructions { background: white; border-radius: 16px; padding: 30px; margin-top: 30px; max-width: 900px; width: 100%; box-shadow: 0 10px 30px rgba(0,0,0,0.15); }
        .instructions h2 { color: #262626; margin-bottom: 25px; text-align: center; font-size: 28px; display: flex; align-items: center; justify-content: center; gap: 12px; }
        .steps { display: grid; grid-template-columns: repeat(3, 1fr); gap: 20px; margin-bottom: 30px; }
        .step { background: #f8f8f8; border-radius: 12px; padding: 25px 20px; text-align: center; }
        .step-number { background: #0095f6; color: white; width: 40px; height: 40px; border-radius: 50%; display: flex; align-items: center; justify-content: center; font-weight: bold; margin: 0 auto 15px; font-size: 18px; }
        .step h3 { margin-bottom: 12px; color: #262626; font-size: 18px; }
        .step p { color: #737373; line-height: 1.6; font-size: 15px; }
        .platforms { display: flex; justify-content: center; gap: 20px; margin-top: 20px; }
        .platform { background: #f8f8f8; border-radius: 12px; padding: 25px; text-align: center; flex: 1; }
        .platform i { font-size: 40px; margin-bottom: 15px; }
        .github i { color: #333; }
        .netlify i { color: #00ad9f; }
        .try-btn { background: #0095f6; color: white; border: none; padding: 10px 20px; border-radius: 6px; font-weight: 500; cursor: pointer; display: inline-flex; align-items: center; gap: 8px; transition: background 0.3s; text-decoration: none; font-size: 14px; }
        .try-btn:hover { background: #0081d6; }
        .important { background: #fff8e6; border-left: 4px solid #ffc107; padding: 15px; margin: 20px 0; border-radius: 0 4px 4px 0; }
        @media (max-width: 768px) { 
            .steps, .platforms { grid-template-columns: 1fr; flex-direction: column; } 
            .header { flex-direction: column; gap: 15px; }
        }
    </style>
</head>
<body>
    <div class="container">
        <div class="header">
            <div class="logo">
                <i class="fab fa-instagram"></i>
                <div class="logo-text">Instagram Grid Planner</div>
            </div>
            <div class="grid-info">
                <div class="grid-size">3×18 Grid</div>
                <div class="counter" id="counter">0/54</div>
            </div>
        </div>
        
        <div class="grid-container">
            <div class="grid" id="grid"></div>
        </div>
        
        <div class="controls">
            <button class="btn" id="uploadBtn">
                <i class="fas fa-cloud-upload-alt"></i> Upload Media
            </button>
            <button class="btn reset" id="resetBtn">
                <i class="fas fa-redo"></i> Reset Grid
            </button>
        </div>
    </div>
    
    <div class="instructions">
        <h2><i class="fas fa-book-open"></i> How to Host Correctly</h2>
        
        <div class="important">
            <strong>Critical Fix:</strong> Save file as <code>index.html</code> for automatic loading on both GitHub Pages and Netlify
        </div>
        
        <div class="steps">
            <div class="step">
                <div class="step-number">1</div>
                <h3>Save File</h3>
                <p>Right-click → Save As → <code>index.html</code></p>
            </div>
            <div class="step">
                <div class="step-number">2</div>
                <h3>Host Online</h3>
                <p>Choose service below</p>
            </div>
            <div class="step">
                <div class="step-number">3</div>
                <h3>Embed in Notion</h3>
                <p><code>/embed</code> → Paste URL</p>
            </div>
        </div>
        
        <h3 style="text-align: center; margin: 25px 0 15px; color: #333;">
            <i class="fab fa-github"></i> GitHub Pages Fix
        </h3>
        
        <div class="platforms">
            <div class="platform">
                <i class="fas fa-exclamation-triangle"></i>
                <h3>Problem: 404 Error</h3>
                <p>• Repository doesn't exist<br>• Pages not enabled<br>• Missing index.html</p>
            </div>
            
            <div class="platform">
                <i class="fas fa-wrench"></i>
                <h3>Solution</h3>
                <p>1. Create repo: <strong>instagram-grid</strong><br>
                2. Upload <code>index.html</code><br>
                3. Settings → Pages → Enable</p>
            </div>
            
            <div class="platform">
                <i class="fas fa-link"></i>
                <h3>Correct URL Format</h3>
                <p>https://<strong>username</strong>.github.io/<strong>instagram-grid</strong>/</p>
                <a href="https://pages.github.com/" target="_blank" class="try-btn">
                    Try GitHub Pages
                </a>
            </div>
        </div>
        
        <h3 style="text-align: center; margin: 25px 0 15px; color: #333;">
            <i class="fas fa-cloud-upload-alt"></i> Netlify Alternative
        </h3>
        
        <div class="platforms">
            <div class="platform">
                <i class="fas fa-bolt"></i>
                <h3>Faster Method</h3>
                <p>1. Go to Netlify Drop<br>
                2. Drag & drop <code>index.html</code><br>
                3. Get instant URL</p>
            </div>
            
            <div class="platform">
                <i class="fas fa-check-circle"></i>
                <h3>No Setup Required</h3>
                <p>• No repository needed<br>• No branch configuration<br>• Instant deployment</p>
            </div>
            
            <div class="platform">
                <i class="fas fa-external-link-alt"></i>
                <h3>Get Your URL</h3>
                <p>https://<strong>your-site</strong>.netlify.app</p>
                <a href="https://app.netlify.com/drop" target="_blank" class="try-btn">
                    Try Netlify Drop
                </a>
            </div>
        </div>
    </div>

    <script>
        const grid = document.getElementById('grid');
        const counter = document.getElementById('counter');
        const totalCells = 54; // 3 columns × 18 rows
        let filledCells = 0;
        
        // Create grid cells
        for (let i = 0; i < totalCells; i++) {
            const gridItem = document.createElement('div');
            gridItem.className = 'grid-item empty';
            gridItem.dataset.index = i;
            gridItem.addEventListener('click', () => openFilePicker(gridItem));
            grid.appendChild(gridItem);
        }
        
        function updateCounter() {
            counter.textContent = `${filledCells}/${totalCells}`;
        }
        
        function openFilePicker(item) {
            const input = document.createElement('input');
            input.type = 'file';
            input.accept = 'image/*,video/*';
            input.onchange = e => handleFile(e, item);
            input.click();
        }
        
        function handleFile(event, container) {
            const file = event.target.files[0];
            if (!file) return;
            
            const url = URL.createObjectURL(file);
            const mediaElement = file.type.startsWith('video') ? 
                createVideoElement(url) : createImageElement(url);
            
            container.innerHTML = '';
            container.appendChild(mediaElement);
            container.classList.remove('empty');
            filledCells++;
            updateCounter();
            
            // Save to localStorage
            const reader = new FileReader();
            reader.onload = () => {
                localStorage.setItem(`gridItem-${container.dataset.index}`, reader.result);
            };
            reader.readAsDataURL(file);
        }
        
        function createImageElement(url) {
            const img = document.createElement('img');
            img.src = url;
            return img;
        }
        
        function createVideoElement(url) {
            const video = document.createElement('video');
            video.src = url;
            video.muted = true;
            video.autoplay = true;
            video.loop = true;
            video.playsInline = true;
            return video;
        }
        
        // Load saved content
        document.addEventListener('DOMContentLoaded', () => {
            document.querySelectorAll('.grid-item').forEach(item => {
                const data = localStorage.getItem(`gridItem-${item.dataset.index}`);
                if (data) {
                    item.classList.remove('empty');
                    item.innerHTML = data.startsWith('data:video') ? 
                        createVideoElement(data).outerHTML : 
                        createImageElement(data).outerHTML;
                    filledCells++;
                }
            });
            updateCounter();
        });
        
        // Upload multiple files
        document.getElementById('uploadBtn').addEventListener('click', () => {
            const input = document.createElement('input');
            input.type = 'file';
            input.accept = 'image/*,video/*';
            input.multiple = true;
            input.onchange = e => {
                Array.from(e.target.files).slice(0, totalCells - filledCells).forEach(file => {
                    const emptyItem = document.querySelector('.grid-item.empty');
                    if (emptyItem) {
                        const url = URL.createObjectURL(file);
                        emptyItem.innerHTML = file.type.startsWith('video') ? 
                            createVideoElement(url).outerHTML : 
                            createImageElement(url).outerHTML;
                        emptyItem.classList.remove('empty');
                        filledCells++;
                        
                        // Save to localStorage
                        const reader = new FileReader();
                        reader.onload = () => {
                            localStorage.setItem(`gridItem-${emptyItem.dataset.index}`, reader.result);
                        };
                        reader.readAsDataURL(file);
                    }
                });
                updateCounter();
            };
            input.click();
        });
        
        // Reset functionality
        document.getElementById('resetBtn').addEventListener('click', () => {
            if (confirm('Reset grid? All content will be deleted.')) {
                localStorage.clear();
                document.querySelectorAll('.grid-item').forEach(item => {
                    item.innerHTML = '';
                    item.className = 'grid-item empty';
                });
                filledCells = 0;
                updateCounter();
            }
        });
    </script>
</body>
</html>
